From 0f6b426bf4ba3ec143a03508667a824a9ae06fc3 Mon Sep 17 00:00:00 2001
From: Con Kolivas <kernel@kolivas.org>
Date: Tue, 11 Oct 2016 17:38:29 +1100
Subject: [PATCH 23/80] Should update sched info data when moving CPUs to get
 correct rq clock.

---
 kernel/sched/MuQSS.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/kernel/sched/MuQSS.c b/kernel/sched/MuQSS.c
index d49bca2..ea86f5a 100644
--- a/kernel/sched/MuQSS.c
+++ b/kernel/sched/MuQSS.c
@@ -1298,10 +1298,10 @@ void set_task_cpu(struct task_struct *p, unsigned int cpu)
 	}
 
 	if ((queued = task_queued(p)))
-		dequeue_task(rq, p, DEQUEUE_SAVE);
+		dequeue_task(rq, p, 0);
 	task_thread_info(p)->cpu = p->wake_cpu = cpu;
 	if (queued)
-		enqueue_task(cpu_rq(cpu), p, ENQUEUE_RESTORE);
+		enqueue_task(cpu_rq(cpu), p, 0);
 }
 #endif /* CONFIG_SMP */
 
-- 
2.7.4

